# AgentX外部数据库环境配置
# 适用于使用外部PostgreSQL数据库的场景
# 复制此文件为.env并根据需要修改配置

# ===================
# 运行模式配置
# ===================
# 外部数据库模式，不启动内置PostgreSQL
DEPLOYMENT_MODE=external

# ===================
# 服务端口配置
# ===================
# 前端服务端口
FRONTEND_PORT=3000
# 后端服务端口
BACKEND_PORT=8088
# RabbitMQ端口
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672

# ===================
# 外部数据库配置
# ===================
# ⚠️ 请配置您的外部数据库连接信息
DB_HOST=your-database-host.com
DB_PORT=5432
DB_NAME=agentx
DB_USER=agentx_user
DB_PASSWORD=your_database_password

# 数据库连接池配置
DB_MAX_POOL_SIZE=20
DB_MIN_IDLE=5
DB_CONNECTION_TIMEOUT=30000

# ===================
# 应用配置
# ===================
# 前端API基础URL
NEXT_PUBLIC_API_BASE_URL=https://your-domain.com/api

# Spring配置
SPRING_PROFILES_ACTIVE=prod
# 外部数据库建议使用validate模式
JPA_DDL_AUTO=validate
SHOW_SQL=false

# ===================
# 默认用户配置
# ===================
# 管理员用户
AGENTX_ADMIN_EMAIL=admin@your-domain.com
AGENTX_ADMIN_PASSWORD=your_admin_password
AGENTX_ADMIN_NICKNAME=系统管理员

# 测试用户（外部数据库环境建议禁用）
AGENTX_TEST_ENABLED=false

# ===================
# 安全配置
# ===================
# JWT密钥
JWT_SECRET=your_jwt_secret_key_here

# ===================
# 日志配置
# ===================
LOG_LEVEL_ROOT=warn
LOG_LEVEL_APP=info

# ===================
# 消息队列配置
# ===================
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_USERNAME=agentx_mq
RABBITMQ_PASSWORD=your_rabbitmq_password

# ===================
# 文件存储配置
# ===================
# 推荐使用共享存储或对象存储
FILE_STORAGE_PATH=/app/storage

# ===================
# 数据库初始化说明
# ===================
# 外部数据库需要手动初始化，请执行以下步骤：
#
# 1. 创建数据库和用户：
#    CREATE DATABASE agentx;
#    CREATE USER agentx_user WITH PASSWORD 'your_password';
#    GRANT ALL PRIVILEGES ON DATABASE agentx TO agentx_user;
#
# 2. 执行初始化脚本：
#    psql -h your-db-host -U agentx_user -d agentx -f docs/sql/01_init.sql
#
# 3. 验证表结构：
#    确保所有表和索引创建成功
#
# 注意：外部数据库版本要求PostgreSQL 12+

# ===================
# 备份配置
# ===================
# 数据库备份配置（推荐配置）
# BACKUP_ENABLED=true
# BACKUP_SCHEDULE=0 2 * * *  # 每天凌晨2点备份
# BACKUP_RETENTION_DAYS=30

# ===================
# 监控配置
# ===================
# 数据库监控
DB_HEALTH_CHECK_ENABLED=true
DB_HEALTH_CHECK_INTERVAL=60

# 应用监控
HEALTH_CHECK_ENABLED=true
METRICS_ENABLED=true

# ===================
# 性能优化配置
# ===================
# 缓存配置
CACHE_ENABLED=true
CACHE_MAX_SIZE=1000

# 异步处理配置
ASYNC_POOL_SIZE=10

# ===================
# 支付配置
# ===================
# 支付宝配置
ALIPAY_APP_ID=your_alipay_app_id
ALIPAY_PRIVATE_KEY=your_alipay_private_key
ALIPAY_PUBLIC_KEY=your_alipay_public_key

# Stripe配置
STRIPE_SECRET_KEY=your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=your_stripe_webhook_secret

# ===================
# GitHub集成配置
# ===================
GITHUB_REPO_NAME=agent-mcp-community
GITHUB_USERNAME=your_github_username
GITHUB_TOKEN=your_github_token